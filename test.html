<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canvas</title>
  </head>
  <body>
	<canvas class="myCanvas">
	  <p>Add suitable fallback here.</p>
	</canvas>
    <script>
		const canvas = document.querySelector('.myCanvas');
		const width = canvas.width = window.innerWidth;
		const height = canvas.height = window.innerHeight;
		const ctx = canvas.getContext('2d');
		var runGame = true;
		<!-- alert('Main body ran'); -->

		drawBackground();
		drawPacman(70,70);
		
		setTimeout(loop, 2000);
		
		async function loop() {
			d = 1;
			while (runGame ) {
				drawBackground();
				drawPacman(70 + 10*d++, 70);
				await sleep(250);
			};
		};
		
		function sleep(ms) {
			return new Promise(resolve => setTimeout(resolve, ms));
		}
		
		<!-- $(document).keyup(function(e) { -->
			<!-- if (e.key === "Escape") { // escape key maps to keycode `27` -->
				
				<!-- runGame = false; -->
				
			<!-- } -->
		<!-- }); -->
		
		<!-- canvas.addEventListener('keypress', function(e) { -->
			<!-- if (e.key == "Escape") { -->
				<!-- runGame = false; -->
				<!-- alert('Escape pressed:'); -->
			<!-- } -->
		<!-- }); -->
		
		document.onkeydown = function(evt) {
			evt = evt || window.event;
			if (evt.keyCode == 27) {
				runGame = false;
			}
		};
		
		function keyPress (e) {
			if(e.key === "Escape") {
				runGame = false;
			}
		}
		
		function degToRad(degrees) {
		  return degrees * Math.PI / 180;
		};
		
		async function delayedGreeting() {
			console.log("Hello");
			await sleep(2000);
			console.log("World!");
			await sleep(2000);
			console.log("Goodbye!");
		}
		
		function drawBackground(){
			ctx.fillStyle = 'rgb(0,255,0)';//green
			ctx.fillRect(0,0,width,height);
			
			ctx.fillStyle = 'rgb(255, 0, 0)';
			ctx.fillRect(50,50,550,550);
			
			ctx.fillStyle = 'rgb(0,255,0)';//green
			ctx.fillRect(60,60,530,530);
			
			ctx.fillStyle = 'rgb(255, 0, 0)';
			ctx.fillRect(80, 80, 100, 100);
			ctx.fillRect(80, 200, 100, 200);
			ctx.fillRect(200, 80, 100, 200);
			ctx.fillRect(200, 300, 220, 100);
			ctx.fillRect(320, 80, 100, 200);
		};
		
		function drawPacman(x, y) {
			ctx.fillStyle = 'yellow';
			ctx.beginPath();
			ctx.arc(x, y, 9, degToRad(-45), degToRad(45), true);
			ctx.lineTo(x, y);
			ctx.fill();
		};
		
    </script>
  </body>
</html>